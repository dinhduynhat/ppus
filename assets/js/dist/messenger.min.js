var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,c,b,f){if(c){b=$jscomp.global;a=a.split(".");for(f=0;f<a.length-1;f++){var d=a[f];d in b||(b[d]={});b=b[d]}a=a[a.length-1];f=b[a];c=c(f);c!=f&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})}};$jscomp.polyfill("Object.is",function(a){return a?a:function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,b){var c=this;c instanceof String&&(c=String(c));var d=c.length;for(b=b||0;b<d;b++)if(c[b]==a||Object.is(c[b],a))return!0;return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,c,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6-impl","es3");var msock,malert,msend,logMessages=!1;
function enableLogging(a){logMessages=a}
function mmessage(a){a=JSON.parse(a.data);var c=!0,b=!1,f={red:"#FF3333",green:"#33FF33",blue:"#3333FF",yellow:"#FFFF33",cyan:"#33FFFF",magenta:"#FF33FF",orange:"#FF8833",white:"#FFFFFF"};switch(a.action){case 1:var d=" was killed";var e="end";var g="red";break;case 2:d=" spawned in";e="join";g="green";break;case 3:d=" is now spectating";e="spectate";g="white";break;case 4:d=" created a party";e="party";g="yellow";break;case 5:d=" joined a party";e="party";g="yellow";break;case 6:d=" left their party";
e="party";g="yellow";break;case 7:d=" connected to the server";e="connect";g="cyan";break;case 8:d=" disconnected from the server";e="connect";g="orange";break;case 9:d=" got a streak of "+a.context.message;e="split";g="magenta";break;case 10:e="explosion";c=!1;$("#warningText").html(a.context.message);$("#warning").fadeIn();pushChat("INFO",a.context.message,"#777");setTimeout(function(){$("#warning").fadeOut()},5E3);break;case 11:e="chat",d=": "+a.context.message+" || ",b=!0}var h=/\[([^]+)\]/.exec(a.player);
h&&2===h.length&&(-1===$.inArray(h[1],knownSkins)&&(a.player=a.player.replace(h[0],"").trim()),a.player=""==a.player?"An unnamed cell":a.player);if(a.id==base.encode(gid)&&!b||"global"==a.id)sfx(e),c&&ui.alert(a.player+d+"."),logMessages&&pushChat("SERVER",a.player+d+".","#777");window.location.pathname.includes("terminal")&&(sfx(e),e=JSON.parse(base.decode(a.id)),$("#log").prepend('<p class="animated fadeIn" style="color: '+f[g]+'">'+a.player+d+" on "+upperCase(e.mode)+" #"+(e.id+1)+".</p>"))}
function mconnect(a){msock=new WebSocket(a);msock.onmessage=function(a){mmessage(a)};msend=function(a,b,f){var c=base.encode(gid);b&&(c=b);msock.send(JSON.stringify({id:c,player:getUserName(),action:a,context:{message:f}}))};window.location.pathname.includes("terminal")&&(malert=function(a,b){msock.send(JSON.stringify({id:b?b:"global",player:"Server",action:10,context:{message:a}}))});msock.onclose=function(){setTimeout(function(){mconnect("ws://compute.popsplit.us:4000")},5E3)}}
function restartClients(){malert("UPDATE INCOMING! Your game will refresh in 5 seconds... <script>setTimeout(function(){location.reload();},5000);\x3c/script>")};
